(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{199:function(t,a,s){"use strict";s.r(a);var n=s(0),e=Object(n.a)({},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"前端性能优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前端性能优化","aria-hidden":"true"}},[t._v("#")]),t._v(" 前端性能优化")]),t._v(" "),s("p",[t._v("我们先来看一下页面渲染流程图，每个阶段的用时在 "),s("code",[t._v("performance.timing")]),t._v(" 里都有记录。\n"),s("img",{attrs:{src:"/blog/huizong.png",alt:"页面渲染流程图"}})]),t._v(" "),s("h2",{attrs:{id:"网络层面优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#网络层面优化","aria-hidden":"true"}},[t._v("#")]),t._v(" 网络层面优化")]),t._v(" "),s("ul",[s("li",[t._v("浏览器缓存。")]),t._v(" "),s("li",[t._v("DNS 优化。")]),t._v(" "),s("li",[t._v("TCP 连接（3 次握手，4 次挥手）。")]),t._v(" "),s("li",[t._v("请求/响应。")])]),t._v(" "),s("h3",{attrs:{id:"cdn-概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cdn-概念","aria-hidden":"true"}},[t._v("#")]),t._v(" CDN 概念")]),t._v(" "),s("ul",[s("li",[t._v("根据 DNS 找到离你最近的服务器。")]),t._v(" "),s("li",[t._v("数据同步策略：热门资源立即同步，不热门数据谁用谁同步。")])]),t._v(" "),s("h2",{attrs:{id:"代码层面优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#代码层面优化","aria-hidden":"true"}},[t._v("#")]),t._v(" 代码层面优化")]),t._v(" "),s("p",[t._v("代码层面可以使用一些优化手段。")]),t._v(" "),s("div",{staticClass:"language-html line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- DNS 预解析 --\x3e")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("dns-prefetch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("//cdfangyuan.cn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 预加载，指明哪些资源是在页面加载完成后即刻需要的，并提前获取--\x3e")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("preload"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://example.com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 预渲染，提前加载下一页的数据 --\x3e")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("prerender"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://example.com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("h3",{attrs:{id:"pc-端"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pc-端","aria-hidden":"true"}},[t._v("#")]),t._v(" PC 端")]),t._v(" "),s("ul",[s("li",[t._v("压缩静态资源文件 体积包的大小 合并减少请求数量。")]),t._v(" "),s("li",[t._v("同一个域名下 3 个 js。")]),t._v(" "),s("li",[t._v("整个网页首屏加载的 js 5 个。")]),t._v(" "),s("li",[t._v("gzip 之后每个文件大小不超过 31.2KB~ 最大 100。")]),t._v(" "),s("li",[t._v("etag 99 年。")])]),t._v(" "),s("h3",{attrs:{id:"移动端"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#移动端","aria-hidden":"true"}},[t._v("#")]),t._v(" 移动端")]),t._v(" "),s("ul",[s("li",[t._v("manifest 离线应用 刷新一次～。")]),t._v(" "),s("li",[t._v("5M 的 localstrage，不能超过 2.5M 同步 容量小 读取快 一半放核心文件 js 激活 js。")]),t._v(" "),s("li",[t._v("基于一步的方案 容量大 读取慢。")]),t._v(" "),s("li",[t._v("异步的组件 css js html 图片～。")]),t._v(" "),s("li",[t._v("localstrage 扩容计划。 iframe + postmessage。")]),t._v(" "),s("li",[t._v("websql indexeddb -> orm。")]),t._v(" "),s("li",[t._v("区分机型 ua。")]),t._v(" "),s("li",[t._v("默认使用 1x 图 网速好则用 2x 图。")])]),t._v(" "),s("h3",{attrs:{id:"传统页面和单页"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#传统页面和单页","aria-hidden":"true"}},[t._v("#")]),t._v(" 传统页面和单页")]),t._v(" "),s("ul",[s("li",[t._v("传统页面，先加载页面骨架，然后 ajax 请求数据，容易白屏。")]),t._v(" "),s("li",[t._v("传统单页，利用 ajax 拉去数据，通过 hash 或者 history，管理路由，速度快，seo 不友好。")]),t._v(" "),s("li",[t._v("最佳实践，pushstate + ajax，首页直出，其他页面内跳转用 ajax 单页，刷新就直出页面，需要后端配合，pjax。")])]),t._v(" "),s("h2",{attrs:{id:"浏览器缓存图"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#浏览器缓存图","aria-hidden":"true"}},[t._v("#")]),t._v(" 浏览器缓存图")]),t._v(" "),s("p",[s("img",{attrs:{src:"/blog/browser-caching.jpg",alt:"浏览器缓存图"}})])])},[],!1,null,null,null);a.default=e.exports}}]);