(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{160:function(t,a,s){"use strict";s.r(a);var n=s(0),e=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"content"},[s("h1",{attrs:{id:"html5-脚本编程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#html5-脚本编程","aria-hidden":"true"}},[t._v("#")]),t._v(" html5 脚本编程")]),s("h2",{attrs:{id:"跨文档消息传递"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#跨文档消息传递","aria-hidden":"true"}},[t._v("#")]),t._v(" 跨文档消息传递")]),s("p",[t._v("postMessage方法,向当前页面的iframe，或由当前页面弹出的窗口中，传递数据。")]),s("blockquote",[s("p",[t._v("只能发送字符串")])]),s("p",[t._v("发送数据：")]),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" iframe "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getElementById")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("'iframe'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\niframe"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("postMessage")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("'text message'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{attrs:{class:"token string"}},[t._v("'http://www.xxx.com'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("接收数据：")]),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("window"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function-variable function"}},[t._v("onmessage")]),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token keyword"}},[t._v("function")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{attrs:{class:"token keyword"}},[t._v("if")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("origin "),s("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'http://www.xxx.com'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token comment"}},[t._v("//获取数据")]),t._v("\n    console"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("log")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token comment"}},[t._v("//向来源窗口发送回执")]),t._v("\n    event"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("source"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("postMessage")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("'收到请求'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{attrs:{class:"token string"}},[t._v("'http://www.xxx.com'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"拖放api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#拖放api","aria-hidden":"true"}},[t._v("#")]),t._v(" 拖放API")]),s("h3",{attrs:{id:"拖放事件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#拖放事件","aria-hidden":"true"}},[t._v("#")]),t._v(" 拖放事件")]),s("ul",[s("li",[t._v("dragstart")]),s("li",[t._v("dragenter 进入放置目标")]),s("li",[t._v("dragover 在放置目标上移动")]),s("li",[t._v("drag 拖动期间")]),s("li",[t._v("dragleave 离开放置目标")]),s("li",[t._v("dragend")])]),s("h3",{attrs:{id:"datatransfer对象"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#datatransfer对象","aria-hidden":"true"}},[t._v("#")]),t._v(" dataTransfer对象")]),s("p",[t._v("只能在上述拖放事件中才能访问dataTransfer对象。")]),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("div"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function-variable function"}},[t._v("ondrag")]),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token keyword"}},[t._v("function")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{attrs:{class:"token comment"}},[t._v("//setData第一个参数表示数据类型 url/text/..")]),t._v("\n  event"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dataTransfer"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setData")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("'text'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{attrs:{class:"token string"}},[t._v("'some text'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" text "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" event"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dataTransfer"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getData")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("'text'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"dropeffect和effectallowed"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dropeffect和effectallowed","aria-hidden":"true"}},[t._v("#")]),t._v(" dropEffect和effectAllowed")]),s("p",[t._v("dataTransfer对象两个属性dropEffect和effectAllowed。")]),s("blockquote",[s("p",[t._v("dropEffect可以知道被拖动元素能够执行那种放置行为，必须在ondrogenter事件中设置。")])]),s("ul",[s("li",[t._v("none 不能把拖动的元素放在这里。这是除文本框之外所有元素的默认值。")]),s("li",[t._v("move 应该把拖动的元素移动到放置目标。")]),s("li",[t._v("copy 应该把拖动的元素复制到放置目标。")]),s("li",[t._v("link 表示放置目标会打开拖动的元素(但拖动的元素必须是一个链接，有URL)。")])]),s("blockquote",[s("p",[t._v("dropEffect 属性只有搭配effectAllowed属性才有用。effectAllow属性表示允许拖动元素的那种dropEffect。\ndropEffect 属性值。")])]),s("ul",[s("li",[t._v("uninitialized 没有给被拖动的元素设置任何放置行为。")]),s("li",[t._v("none 被拖动的元素不能有任何行为。")]),s("li",[t._v("copy 只允许值为copy的dropEffect。")]),s("li",[t._v("link 只允许值为link的dropEffect。")]),s("li",[t._v("move 只允许值为move的dropEffect。")]),s("li",[t._v("copyLink 只允许值为copy和link的dropEffect。")]),s("li",[t._v("copyMove 只允许值为copy和move的dropEffect。")]),s("li",[t._v("linkMove 只允许值为link和move的dropEffect。")]),s("li",[t._v("all 允许任意dropEffect。")])]),s("h3",{attrs:{id:"可拖动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#可拖动","aria-hidden":"true"}},[t._v("#")]),t._v(" 可拖动")]),s("p",[t._v("默认情况下，图像、链接和文本是可以拖动的，文本是选中的情况下才可以，让其他元素可拖动，使用draggable属性。")]),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{attrs:{class:"token attr-name"}},[t._v("draggable")]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),s("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("可拖动div"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("h2",{attrs:{id:"媒体元素"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#媒体元素","aria-hidden":"true"}},[t._v("#")]),t._v(" 媒体元素")]),s("p",[t._v("audio和video可以不依赖任何插件，嵌入浏览器音频和视频内容。\nposter属性可以指定加载视频时，显示一幅图像。")]),s("h2",{attrs:{id:"历史状态管理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#历史状态管理","aria-hidden":"true"}},[t._v("#")]),t._v(" 历史状态管理")]),s("p",[t._v("在现代web应用中，用户的每次操作不一定会打开一个全新的页面，因此“后退”和”前进“按钮也就失去了作用。使用hashchange事件可以解决这个问题。\n通过hashchange事件，可以知道url的参数什么时候发生了变化，然后使用"),s("code",[t._v("history.pushState();")]),t._v("去设置状态。")]),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("// 参数分别为L状态对象，新状态标题，可选的相对URL")]),t._v("\nhistory"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("pushState")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("name"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token string"}},[t._v("'yhl'")]),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{attrs:{class:"token string"}},[t._v("'new title'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{attrs:{class:"token string"}},[t._v("'yhl.html'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("执行pushState()方法后，新的状态信息就会被加入历史状态栈，而浏览器状态栏也会变成新的相对url。按下后退按钮，会触发window对象的popState事件。")]),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("window"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function-variable function"}},[t._v("onpopstate")]),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token keyword"}},[t._v("function")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" state"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("event"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{attrs:{class:"token comment"}},[t._v("//......")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("更新当前状态，使用replaceState，会重写当前状态，不会再历史状态站中创建新状态。")])])}],!1,null,null,null);a.default=e.exports}}]);