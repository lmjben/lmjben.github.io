(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{237:function(v,t,_){"use strict";_.r(t);var a=_(0),s=Object(a.a)({},function(){var v=this,t=v.$createElement,_=v._self._c||t;return _("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[_("h1",{attrs:{id:"小程序使用总结"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#小程序使用总结","aria-hidden":"true"}},[v._v("#")]),v._v(" 小程序使用总结")]),v._v(" "),_("p",[v._v("如题，小程序现在很普及，公司的前端不是在写 H5 页面，就是在写小程序，这篇文章并不是写小程序代码的编写，而是总结小程序原理部分。")]),v._v(" "),_("h2",{attrs:{id:"小程序特点"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#小程序特点","aria-hidden":"true"}},[v._v("#")]),v._v(" 小程序特点")]),v._v(" "),_("ul",[_("li",[v._v("类 WEB 不是 HTML5。")]),v._v(" "),_("li",[v._v("即用即走，随手可得。")]),v._v(" "),_("li",[v._v("拥有离线能力。")]),v._v(" "),_("li",[v._v("基于微信跨平台。")]),v._v(" "),_("li",[v._v("媲美原生操作体验。")])]),v._v(" "),_("div",{staticClass:"warning custom-block"},[_("p",{staticClass:"custom-block-title"},[v._v("小程序为什么快？")]),v._v(" "),_("p",[v._v("Native 预先加载一个 WebView 当打开指定页面时，无需加载额外资源直接渲染。")]),v._v(" "),_("p",[v._v("返回显示历史 View 退出小程序，View 状态不销毁。")])]),v._v(" "),_("h2",{attrs:{id:"小程序架构"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#小程序架构","aria-hidden":"true"}},[v._v("#")]),v._v(" 小程序架构")]),v._v(" "),_("p",[v._v("小程序分为 3 个部分，视图层，逻辑层，和 系统层。")]),v._v(" "),_("p",[v._v("视图层包括 WXML 和 WXSS。\n逻辑层包括我们写的 js。")]),v._v(" "),_("p",[v._v("视图层和逻辑层采用 "),_("router-link",{attrs:{to:"/blog/js-jsBridge.html"}},[v._v("JsBridge")]),v._v(" 进行通信。")],1),v._v(" "),_("p",[_("img",{attrs:{src:"/blog/wx-jiagou.png",alt:"小程序架构图"}})]),v._v(" "),_("p",[v._v("小程序运行时：先从 cdn 上获取小程序需要的包。")]),v._v(" "),_("p",[_("img",{attrs:{src:"/blog/wx-jiagou2.png",alt:"小程序架构图2"}})]),v._v(" "),_("h2",{attrs:{id:"视图层"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#视图层","aria-hidden":"true"}},[v._v("#")]),v._v(" 视图层")]),v._v(" "),_("p",[v._v("视图层运行环境：")]),v._v(" "),_("ul",[_("li",[v._v("在 WebView 中运行。")])]),v._v(" "),_("h3",{attrs:{id:"wxml"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#wxml","aria-hidden":"true"}},[v._v("#")]),v._v(" WXML")]),v._v(" "),_("p",[v._v("WXML(WeiXin Markup Language)")]),v._v(" "),_("p",[v._v("支持数据绑定 支持逻辑算术、运算 支持模板、引用 支持添加事件(bindtap)。")]),v._v(" "),_("p",[v._v("WXML 运行流程：\n"),_("img",{attrs:{src:"/blog/wx-wxml.png",alt:"WXML运行流程"}})]),v._v(" "),_("h3",{attrs:{id:"wxss"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#wxss","aria-hidden":"true"}},[v._v("#")]),v._v(" WXSS")]),v._v(" "),_("p",[v._v("WXSS(WeiXin Style Sheets)")]),v._v(" "),_("ul",[_("li",[v._v("支持大部分 CSS 特性。")]),v._v(" "),_("li",[v._v("添加尺寸单位 rpx，可根据屏幕宽度自适应。")]),v._v(" "),_("li",[v._v("不支持多层选择器-避免被组件内结构破坏。（因为生成到 WebView 中的 dom 树和实际的 WXML 会有差异。）")])]),v._v(" "),_("p",[v._v("WXSS 运行流程：\n"),_("img",{attrs:{src:"/blog/wx-wxss.png",alt:"WXSS运行流程"}})]),v._v(" "),_("h3",{attrs:{id:"小程序组件"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#小程序组件","aria-hidden":"true"}},[v._v("#")]),v._v(" 小程序组件")]),v._v(" "),_("p",[v._v("小程序的组件基于 Web Component 标准 使用 Polymer 框架实现 Web Component。")]),v._v(" "),_("h2",{attrs:{id:"逻辑层"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#逻辑层","aria-hidden":"true"}},[v._v("#")]),v._v(" 逻辑层")]),v._v(" "),_("p",[v._v("逻辑层将数据进行处理后发送给视图层，同时接受视图层的事件反馈。")]),v._v(" "),_("p",[v._v("1、App( ) 小程序的入口。")]),v._v(" "),_("p",[v._v("2、Page( ) 页面的入口。")]),v._v(" "),_("p",[v._v("3、提供丰富的 API，如微信用户数据，扫一扫，支付等微信特有能力。")]),v._v(" "),_("p",[v._v("4、每个页面有独立的作用域，并提供模块化能力。")]),v._v(" "),_("p",[v._v("5、数据绑定、事件分发、生命周期管理、路由管理。")]),v._v(" "),_("p",[v._v("6、创建新的 WebView，加快下次渲染。")]),v._v(" "),_("p",[_("img",{attrs:{src:"/blog/wx-appService.png",alt:"逻辑层"}})]),v._v(" "),_("p",[v._v("如图所示：")]),v._v(" "),_("ul",[_("li",[v._v("一个小程序包含 1 个逻辑层和多个视图层。")]),v._v(" "),_("li",[v._v("每打开一个页面，就会创建一个新的 WebView，创建 WebView 是比较消耗资源和耗时的，所以微信限制最多只能嵌套 10 层。")])]),v._v(" "),_("p",[v._v("逻辑层运行环境：")]),v._v(" "),_("ul",[_("li",[v._v("IOS - JSCore。")]),v._v(" "),_("li",[v._v("Android - X5 JS 解析器。")]),v._v(" "),_("li",[v._v("DevTool - nwjs Chrome 内核。")])]),v._v(" "),_("h2",{attrs:{id:"小程序开发建议"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#小程序开发建议","aria-hidden":"true"}},[v._v("#")]),v._v(" 小程序开发建议")]),v._v(" "),_("div",{staticClass:"tip custom-block"},[_("p",{staticClass:"custom-block-title"},[v._v("小程序开发建议")]),v._v(" "),_("p",[v._v("1、提前新建 WebView，准备新页面渲染。")]),v._v(" "),_("p",[v._v("2、View 层和逻辑层分离，通过数据驱动，不直接操作 DOM。")]),v._v(" "),_("p",[v._v("3、使用 Virtual DOM，进行局部更新。")]),v._v(" "),_("p",[v._v("4、全部使用 https，确保传输中安全。")]),v._v(" "),_("p",[v._v("5、前端组件化开发。")]),v._v(" "),_("p",[v._v("6、加入 rpx 单位，隔离设备尺寸，方便开发。")])]),v._v(" "),_("h2",{attrs:{id:"小程序存在的问题"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#小程序存在的问题","aria-hidden":"true"}},[v._v("#")]),v._v(" 小程序存在的问题")]),v._v(" "),_("div",{staticClass:"tip custom-block"},[_("p",{staticClass:"custom-block-title"},[v._v("小程序存在的问题")]),v._v(" "),_("p",[v._v("1、小程序仍然使用 WebView 渲染，并非原生渲染。")]),v._v(" "),_("p",[v._v("2、需要独立开发，不能在非微信环境运行。")]),v._v(" "),_("p",[v._v("3、开发者不可以扩展新组件。")]),v._v(" "),_("p",[v._v("4、服务端接口返回的头无法执行，比如:Set-Cookie。")]),v._v(" "),_("p",[v._v("5、依赖浏览器环境的 js 库不能使用，因为是 JSCore 执行的，没有 window、document 对象。")]),v._v(" "),_("p",[v._v("6、WXSS 中无法使用本地(图片、字体等)。")]),v._v(" "),_("p",[v._v("7、WXSS 转化成 js 而不是 css，为了兼容 rpx。")]),v._v(" "),_("p",[v._v("8、WXSS 不支持级联选择器。")]),v._v(" "),_("p",[v._v("9、小程序无法打开页面，无法拉起 APP。")])])])},[],!1,null,null,null);t.default=s.exports}}]);